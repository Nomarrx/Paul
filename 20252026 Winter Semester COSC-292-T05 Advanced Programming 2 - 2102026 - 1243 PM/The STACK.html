<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="/shared/sp-template/styles/SP-Global-2015.css">
<link rel="stylesheet" type="text/css" href="/shared/sp-template/styles/SP-bootstrap-grid.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
<script src="/shared/sp-template/scripts/jquery.ui.touch-punch.min.js"></script>
<link rel="stylesheet" type="text/css" href="/shared/sp-template/styles/jquery-ui.min.css">
<script src="/shared/sp-template/scripts/snippets/accordion.js"></script>	
<script>$(document).ready(function(){$("h1:first").addClass("sr-only");});</script>
<title></title>

</head><body><h1>How Function Calls Use the Stack</h1>
<p>When a function is called in a typical compiled language such as C, the program creates a&nbsp;<strong>stack frame</strong> for that specific call. A stack frame contains everything the function needs to execute, including return information, parameters, and its local variables.</p>
<h2>What Happens During a Function Call?</h2>
<p>Each time a function is called, the runtime usually does the following:</p>
<ul>
<li>Pushes the <strong>return address</strong> (where to continue after the function finishes).</li>
<li>Reserves space for the <strong>return value</strong> (depending on the ABI).</li>
<li>Pushes <strong>parameters</strong> onto the stack (if any).</li>
<li>Allocates memory on the stack for the function's <strong>local variables</strong>.</li>
</ul>
<p>These details vary slightly depending on the compiler, operating system, and ABI (Application Binary Interface).</p>
<h2>Example Program</h2>
<pre class="line-numbers d2l-code"><code class="language-c">func1()
{
    int someValue;
}

func2()
{
    int anotherValue;
    func1();
}

main()
{
    int someValue;
    func1();
    func2();
}</code></pre>
<p>&nbsp;</p>
<section class="d2l-cplus-layout d2l-cplus-layout-two-third" aria-label="layout with a large panel followed by a smaller panel" tabindex="-1">
<section class="d2l-cplus-layout-column" aria-label="panel 1 of 2" tabindex="-1">
<h2>How the Stack Changes</h2>
<h3>1. Program Start: main() Begins</h3>
<p>The stack is initially empty. As <code>main()</code> starts, it receives a stack frame containing its return address, (empty) parameter space, and its local variable <code>someValue</code>.</p>
<h3>2. main() Calls func1()</h3>
<p>A new stack frame for <code>func1</code> is placed on top of main's. Both functions now have their own separate copies of <code>someValue</code>, each stored in different stack locations.</p>
<h3>3. func1() Returns</h3>
<p>The entire stack frame for <code>func1</code> is removed. Its local variables no longer exist, though the memory may still contain leftover data.</p>
<h3>4. main() Calls func2()</h3>
<p>A new stack frame for <code>func2</code> is added. Its local variable may reuse memory that previously belonged to <code>func1</code>, but this is not guaranteed.</p>
<h3>5. func2() Calls func1() Again</h3>
<p>Another stack frame for <code>func1</code> is created. This new frame may appear at a different memory location compared to its first call.</p>
<h3>6. Functions Return in Reverse Order</h3>
<ul>
<li><code>func1</code> returns → its frame removed</li>
<li><code>func2</code> returns → its frame removed</li>
<li><code>main</code> returns → its frame removed</li>
</ul>
<p>This unwinding process continues until the program ends.</p>
</section>
<section class="d2l-cplus-layout-column" aria-label="panel 2 of 2" tabindex="-1">
<p><img src="Stack_20260115194635911.gif" style="max-width: 100%;" data-d2l-editor-default-img-style="true"></p>
</section>
</section>
<p>&nbsp;</p>
<pre></pre></body></html>